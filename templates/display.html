<!DOCTYPE html>
<html>

<head>
    <title>Displaying your FITS files</title>
    <meta charset="utf-8">
    <style>
        #aladin-lite-div {
            margin-top: 20px;
            border: 1px solid black;
            width: 100%;
            height: 700px;
        }
    </style>
</head>

<body>
    <h2>Displaying your FITS files</h2>

    <form method="POST" action="/display">
        {% for file in files %}
        <input type="radio" name="selected_file" value="{{ file }}" {% if selected_file==file %}checked{% endif %}>{{
        file }}<br>
        {% endfor %}
        <input type="submit" value="Display">
    </form>

    {% if selected_file %}
    <div id="aladin-lite-div"></div>

    <script type="text/javascript" src="https://aladin.u-strasbg.fr/AladinLite/api/v3/latest/aladin.js"
        charset="utf-8"></script>
    <script type="text/javascript">
        A.init().then(() => {
            let aladin = A.aladin('#aladin-lite-div');

            aladin.setImageSurvey(aladin.createImageSurvey(
                "HiPS",
                "HiPS local",
                "http://localhost:5000/hips/{{ request.cookies.get('userID') }}/{{ selected_file }}/",
                "equatorial",
                9,
                { imgFormat: 'png' }
            ));
        });
    </script>

    {% endif %}
</body>

</html>