<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Aladin Lite Visualiser</title>
    <style>
        #aladin-lite-div {
            margin-top: 20px;
            border: 1px solid black;
            width: 500px;
            height: 500px;
        }
    </style>
</head>

<body>

    <h2>Upload FITS files</h2>

    <form action="/deleteAll" method="POST">
        <button type="submit">Delete All</button>
    </form>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <ul>
        {% for m in messages %}
        <li>{{ m }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}

    <form action="/upload" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" multiple accept=".fits">
        <input type="submit" value="Upload">
    </form>

    <div id="aladin-lite-div"></div>

    <script type="text/javascript" src="https://aladin.u-strasbg.fr/AladinLite/api/v3/latest/aladin.js" charset="utf-8">
    </script>
    <script type="text/javascript">
        var aladin;
        A.init.then(() => {
            aladin = A.aladin('#aladin-lite-div');
            aladin.setImageSurvey(aladin.createImageSurvey(
                "F658N-local",
                "F658N Custom HiPS",
                "http://localhost:5000/hips/F658N/",
                "equatorial",
                9,
                { imgFormat: 'png' }
            ));
        });
    </script>

</body>

</html>